{
  "version": "7.3",
  "data_api_version": "3.0",
  "routing_model": {
    "WELCOME": ["SERVICE_SELECTION"],
    "SERVICE_SELECTION": ["DATE_SELECTION"],
    "DATE_SELECTION": ["BARBER_SELECTION"],
    "BARBER_SELECTION": ["TIME_SELECTION"],
    "TIME_SELECTION": ["DETAILS"],
    "DETAILS": ["CONFIRMATION_PREP"],
    "CONFIRMATION_PREP": ["CONFIRMATION"],
    "CONFIRMATION": []
  },
  "screens": [
    {
      "id": "WELCOME",
      "title": "Bem-vindo ao teste",
      "terminal": false,
      "data": {},
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Image",
            "src": "https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=800&auto=format&fit=crop",
            "height": 180,
            "scale-type": "cover",
            "aspect-ratio": 2.5,
            "alt-text": "Barbearia - Ambiente moderno"
          },
          {
            "type": "TextHeading",
            "text": "üíà Agende seu hor√°rio"
          },
          {
            "type": "TextBody",
            "text": "Ol√°! Agende seu atendimento de forma r√°pida e pr√°tica. Em poucos passos voc√™ escolhe o servi√ßo, data, barbeiro e hor√°rio."
          },
          {
            "type": "TextCaption",
            "text": "‚è±Ô∏è Leva menos de 1 minuto"
          },
          {
            "type": "Footer",
            "label": "Come√ßar agendamento",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "INIT"
              }
            }
          }
        ]
      }
    },
    {
      "id": "SERVICE_SELECTION",
      "title": "Escolha o Servi√ßo",
      "terminal": false,
      "data": {
        "services": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "title": { "type": "string" },
              "description": { "type": "string" }
            }
          },
          "__example__": [
            { "id": "corte_masculino", "title": "Corte Masculino", "description": "R$ 45 ‚Ä¢ 45 min" }
          ]
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "Qual servi√ßo voc√™ deseja?"
          },
          {
            "type": "TextCaption",
            "text": "Selecione uma op√ß√£o abaixo"
          },
          {
            "type": "Form",
            "name": "service_form",
            "children": [
              {
                "type": "RadioButtonsGroup",
                "name": "selected_service",
                "label": "Servi√ßos dispon√≠veis",
                "required": true,
                "data-source": "${data.services}"
              }
            ]
          },
          {
            "type": "Footer",
            "label": "Escolher data",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "SELECT_SERVICE",
                "selected_service": "${form.selected_service}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "DATE_SELECTION",
      "title": "Escolha a Data",
      "terminal": false,
      "data": {
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "min_date": {
          "type": "string",
          "__example__": "2025-01-01"
        },
        "max_date": {
          "type": "string",
          "__example__": "2025-12-31"
        },
        "unavailable_dates": {
          "type": "array",
          "items": { "type": "string" },
          "__example__": ["2025-12-25"]
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "Quando voc√™ quer vir?"
          },
          {
            "type": "TextBody",
            "text": "${data.service_name}"
          },
          {
            "type": "TextCaption",
            "text": "${data.service_price}"
          },
          {
            "type": "Form",
            "name": "date_form",
            "children": [
              {
                "type": "DatePicker",
                "name": "selected_date",
                "label": "Selecione a data",
                "required": true,
                "min-date": "${data.min_date}",
                "max-date": "${data.max_date}",
                "unavailable-dates": "${data.unavailable_dates}"
              }
            ]
          },
          {
            "type": "Footer",
            "label": "Ver barbeiros dispon√≠veis",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "SELECT_DATE",
                "selected_service": "${data.selected_service}",
                "selected_date": "${form.selected_date}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "BARBER_SELECTION",
      "title": "Escolha o Barbeiro",
      "terminal": false,
      "data": {
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "selected_date": {
          "type": "string",
          "__example__": "2025-01-15"
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "formatted_date": {
          "type": "string",
          "__example__": "15/01/2025"
        },
        "barbers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "title": { "type": "string" },
              "description": { "type": "string" }
            }
          },
          "__example__": [
            { "id": "joao", "title": "Jo√£o Silva", "description": "Dispon√≠vel" }
          ]
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "Quem vai te atender?"
          },
          {
            "type": "TextCaption",
            "text": "${data.service_name}"
          },
          {
            "type": "TextCaption",
            "text": "${data.formatted_date}"
          },
          {
            "type": "Form",
            "name": "barber_form",
            "children": [
              {
                "type": "RadioButtonsGroup",
                "name": "selected_barber",
                "label": "Barbeiros dispon√≠veis",
                "required": true,
                "data-source": "${data.barbers}"
              }
            ]
          },
          {
            "type": "Footer",
            "label": "Ver hor√°rios",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "SELECT_BARBER",
                "selected_service": "${data.selected_service}",
                "selected_date": "${data.selected_date}",
                "selected_barber": "${form.selected_barber}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "TIME_SELECTION",
      "title": "Escolha o Hor√°rio",
      "terminal": false,
      "data": {
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "selected_date": {
          "type": "string",
          "__example__": "2025-01-15"
        },
        "selected_barber": {
          "type": "string",
          "__example__": "joao"
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "barber_name": {
          "type": "string",
          "__example__": "Jo√£o Silva"
        },
        "formatted_date": {
          "type": "string",
          "__example__": "15/01/2025"
        },
        "available_times": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "title": { "type": "string" },
              "description": { "type": "string" }
            }
          },
          "__example__": [
            { "id": "09:00", "title": "09:00", "description": "Dispon√≠vel" }
          ]
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "Hor√°rios dispon√≠veis"
          },
          {
            "type": "TextCaption",
            "text": "${data.barber_name}"
          },
          {
            "type": "TextCaption",
            "text": "${data.formatted_date}"
          },
          {
            "type": "TextCaption",
            "text": "‚è∞ Hor√°rios em tempo real"
          },
          {
            "type": "Form",
            "name": "time_form",
            "children": [
              {
                "type": "RadioButtonsGroup",
                "name": "selected_time",
                "label": "Selecione um hor√°rio",
                "required": true,
                "data-source": "${data.available_times}"
              }
            ]
          },
          {
            "type": "Footer",
            "label": "Continuar",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "SELECT_TIME",
                "selected_service": "${data.selected_service}",
                "selected_date": "${data.selected_date}",
                "selected_barber": "${data.selected_barber}",
                "selected_time": "${form.selected_time}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "DETAILS",
      "title": "Seus Dados",
      "terminal": false,
      "data": {
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "selected_date": {
          "type": "string",
          "__example__": "2025-01-15"
        },
        "selected_barber": {
          "type": "string",
          "__example__": "joao"
        },
        "selected_time": {
          "type": "string",
          "__example__": "09:00"
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "barber_name": {
          "type": "string",
          "__example__": "Jo√£o Silva"
        },
        "formatted_date": {
          "type": "string",
          "__example__": "15/01/2025"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "Quase l√°! Seus dados"
          },
          {
            "type": "TextBody",
            "text": "Resumo do agendamento:"
          },
          {
            "type": "TextCaption",
            "text": "${data.service_name}"
          },
          {
            "type": "TextCaption",
            "text": "${data.service_price}"
          },
          {
            "type": "TextCaption",
            "text": "${data.barber_name}"
          },
          {
            "type": "TextCaption",
            "text": "${data.formatted_date}"
          },
          {
            "type": "TextCaption",
            "text": "${data.selected_time}"
          },
          {
            "type": "Form",
            "name": "details_form",
            "children": [
              {
                "type": "TextInput",
                "name": "client_name",
                "label": "Seu nome completo",
                "required": true,
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "client_phone",
                "label": "WhatsApp para contato",
                "required": true,
                "input-type": "phone"
              },
              {
                "type": "TextInput",
                "name": "client_email",
                "label": "E-mail (opcional)",
                "required": false,
                "input-type": "email"
              },
              {
                "type": "TextArea",
                "name": "notes",
                "label": "Observa√ß√µes (opcional)",
                "required": false
              }
            ]
          },
          {
            "type": "Footer",
            "label": "Revisar agendamento",
            "on-click-action": {
              "name": "data_exchange",
              "payload": {
                "action_type": "SUBMIT_DETAILS",
                "selected_service": "${data.selected_service}",
                "selected_date": "${data.selected_date}",
                "selected_barber": "${data.selected_barber}",
                "selected_time": "${data.selected_time}",
                "client_name": "${form.client_name}",
                "client_phone": "${form.client_phone}",
                "client_email": "${form.client_email}",
                "notes": "${form.notes}",
                "service_name": "${data.service_name}",
                "service_price": "${data.service_price}",
                "barber_name": "${data.barber_name}",
                "formatted_date": "${data.formatted_date}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "CONFIRMATION_PREP",
      "title": "Preparando",
      "terminal": false,
      "data": {
        "booking_id": {
          "type": "string",
          "__example__": "AGD-12345"
        },
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "selected_date": {
          "type": "string",
          "__example__": "2025-01-15"
        },
        "selected_barber": {
          "type": "string",
          "__example__": "joao"
        },
        "selected_time": {
          "type": "string",
          "__example__": "09:00"
        },
        "client_name": {
          "type": "string",
          "__example__": "Jo√£o Cliente"
        },
        "client_phone": {
          "type": "string",
          "__example__": "+55 11 99999-9999"
        },
        "client_email": {
          "type": "string",
          "__example__": "cliente@email.com"
        },
        "notes": {
          "type": "string",
          "__example__": ""
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "barber_name": {
          "type": "string",
          "__example__": "Jo√£o Silva"
        },
        "formatted_date": {
          "type": "string",
          "__example__": "15/01/2025 (Quarta-feira)"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Footer",
            "label": "Continuar",
            "on-click-action": {
              "name": "navigate",
              "next": {
                "type": "screen",
                "name": "CONFIRMATION"
              }
            }
          }
        ]
      }
    },
    {
      "id": "CONFIRMATION",
      "title": "Confirmar",
      "terminal": true,
      "success": true,
      "data": {
        "booking_id": {
          "type": "string",
          "__example__": "AGD-12345"
        },
        "selected_service": {
          "type": "string",
          "__example__": "corte_masculino"
        },
        "selected_date": {
          "type": "string",
          "__example__": "2025-01-15"
        },
        "selected_barber": {
          "type": "string",
          "__example__": "joao"
        },
        "selected_time": {
          "type": "string",
          "__example__": "09:00"
        },
        "client_name": {
          "type": "string",
          "__example__": "Jo√£o Cliente"
        },
        "client_phone": {
          "type": "string",
          "__example__": "+55 11 99999-9999"
        },
        "client_email": {
          "type": "string",
          "__example__": "cliente@email.com"
        },
        "notes": {
          "type": "string",
          "__example__": ""
        },
        "service_name": {
          "type": "string",
          "__example__": "Corte Masculino"
        },
        "service_price": {
          "type": "string",
          "__example__": "R$ 45"
        },
        "barber_name": {
          "type": "string",
          "__example__": "Jo√£o Silva"
        },
        "formatted_date": {
          "type": "string",
          "__example__": "15/01/2025 (Quarta-feira)"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "form",
            "children": [
              {
                "type": "TextHeading",
                "text": "‚úÖ Agendamento confirmado!"
              },
              {
                "type": "TextSubheading",
                "text": "C√≥digo: ${data.booking_id}"
              },
              {
                "type": "TextBody",
                "text": "Seu hor√°rio est√° reservado:"
              },
              {
                "type": "TextBody",
                "text": "üíà ${data.service_name}"
              },
              {
                "type": "TextBody",
                "text": "‚úÇÔ∏è ${data.barber_name}"
              },
              {
                "type": "TextBody",
                "text": "üìÖ ${data.formatted_date}"
              },
              {
                "type": "TextBody",
                "text": "üïê ${data.selected_time}"
              },
              {
                "type": "TextBody",
                "text": "üí∞ Valor: ${data.service_price}"
              },
              {
                "type": "TextBody",
                "text": "üë§ Cliente: ${data.client_name}"
              },
              {
                "type": "TextCaption",
                "text": "üì≤ Voc√™ receber√° uma confirma√ß√£o e lembrete antes do hor√°rio."
              },
              {
                "type": "TextCaption",
                "text": "‚ö†Ô∏è Para cancelar, entre em contato informando o c√≥digo ${data.booking_id}"
              },
              {
                "type": "Footer",
                "label": "Concluir",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "booking_id": "${data.booking_id}",
                    "selected_service": "${data.selected_service}",
                    "selected_date": "${data.selected_date}",
                    "selected_barber": "${data.selected_barber}",
                    "selected_time": "${data.selected_time}",
                    "client_name": "${data.client_name}",
                    "client_phone": "${data.client_phone}",
                    "client_email": "${data.client_email}",
                    "notes": "${data.notes}",
                    "service_name": "${data.service_name}",
                    "service_price": "${data.service_price}",
                    "barber_name": "${data.barber_name}",
                    "formatted_date": "${data.formatted_date}",
                    "status": "confirmed"
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}
